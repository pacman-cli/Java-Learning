{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/puspo/JavaCourse/SpringBoot/hospitalManagementSystem/frontend/src/providers/AuthProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Cookies from \"js-cookie\";\nimport toast from \"react-hot-toast\";\n\nexport interface User {\n  id: number;\n  username: string;\n  fullName: string;\n  email: string;\n  roles: string[];\n  expiresAt: string;\n}\n\nexport interface LoginCredentials {\n  username: string;\n  password: string;\n}\n\nexport interface RegisterData {\n  username: string;\n  password: string;\n  fullName: string;\n  email: string;\n  roles: string[];\n}\n\nexport interface AuthResponse {\n  token: string;\n  type: string;\n  id: number;\n  username: string;\n  fullName: string;\n  email: string;\n  roles: string[];\n  expiresAt: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  token: string | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n  login: (credentials: LoginCredentials) => Promise<void>;\n  logout: () => void;\n  register: (data: RegisterData) => Promise<void>;\n  hasRole: (role: string) => boolean;\n  hasAnyRole: (roles: string[]) => boolean;\n  refreshUser: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nconst API_BASE_URL =\n  process.env.NEXT_PUBLIC_API_BASE_URL || \"http://localhost:8080\";\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const router = useRouter();\n\n  const isAuthenticated = !!user && !!token;\n\n  // Initialize auth state from cookies\n  useEffect(() => {\n    const initAuth = () => {\n      try {\n        const storedToken = Cookies.get(\"authToken\");\n        const storedUser = Cookies.get(\"authUser\");\n\n        if (storedToken && storedUser) {\n          const parsedUser = JSON.parse(storedUser);\n\n          // Check if token is expired\n          if (\n            parsedUser.expiresAt &&\n            new Date(parsedUser.expiresAt) > new Date()\n          ) {\n            setToken(storedToken);\n            setUser(parsedUser);\n          } else {\n            // Token expired, clear auth data\n            clearAuthData();\n          }\n        }\n      } catch (error) {\n        console.error(\"Error initializing auth:\", error);\n        clearAuthData();\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    initAuth();\n  }, []);\n\n  const clearAuthData = () => {\n    setUser(null);\n    setToken(null);\n    Cookies.remove(\"authToken\");\n    Cookies.remove(\"authUser\");\n  };\n\n  const saveAuthData = (authResponse: AuthResponse) => {\n    const userData: User = {\n      id: authResponse.id,\n      username: authResponse.username,\n      fullName: authResponse.fullName,\n      email: authResponse.email,\n      roles: authResponse.roles,\n      expiresAt: authResponse.expiresAt,\n    };\n\n    setToken(authResponse.token);\n    setUser(userData);\n\n    // Save to cookies with expiration\n    const expiresAt = new Date(authResponse.expiresAt);\n    Cookies.set(\"authToken\", authResponse.token, {\n      expires: expiresAt,\n      secure: process.env.NODE_ENV === \"production\",\n      sameSite: \"lax\",\n    });\n    Cookies.set(\"authUser\", JSON.stringify(userData), {\n      expires: expiresAt,\n      secure: process.env.NODE_ENV === \"production\",\n      sameSite: \"lax\",\n    });\n  };\n\n  const login = async (credentials: LoginCredentials) => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(credentials),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || \"Login failed\");\n      }\n\n      const authResponse: AuthResponse = await response.json();\n      saveAuthData(authResponse);\n\n      toast.success(`Welcome back, ${authResponse.fullName}!`);\n      router.push(\"/dashboard\");\n    } catch (error) {\n      const message = error instanceof Error ? error.message : \"Login failed\";\n      toast.error(message);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const register = async (data: RegisterData) => {\n    setIsLoading(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/register`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(data),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(errorData.message || \"Registration failed\");\n      }\n\n      await response.json();\n\n      toast.success(\n        `Registration successful! Please login with your credentials.`,\n      );\n\n      // Auto-login after successful registration\n      await login({\n        username: data.username,\n        password: data.password,\n      });\n    } catch (error) {\n      const message =\n        error instanceof Error ? error.message : \"Registration failed\";\n      toast.error(message);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = () => {\n    clearAuthData();\n    toast.success(\"Logged out successfully\");\n    router.push(\"/login\");\n  };\n\n  const refreshUser = async () => {\n    if (!token) return;\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/auth/me`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to refresh user data\");\n      }\n\n      const userData: User = await response.json();\n      setUser(userData);\n\n      // Update cookie\n      const expiresAt = new Date(userData.expiresAt);\n      Cookies.set(\"authUser\", JSON.stringify(userData), {\n        expires: expiresAt,\n        secure: process.env.NODE_ENV === \"production\",\n        sameSite: \"lax\",\n      });\n    } catch (error) {\n      console.error(\"Error refreshing user:\", error);\n      // If refresh fails, logout user\n      logout();\n    }\n  };\n\n  const hasRole = (role: string): boolean => {\n    if (!user) return false;\n    return user.roles.includes(role) || user.roles.includes(`ROLE_${role}`);\n  };\n\n  const hasAnyRole = (roles: string[]): boolean => {\n    if (!user) return false;\n    return roles.some((role) => hasRole(role));\n  };\n\n  // Auto logout when token expires\n  useEffect(() => {\n    if (user?.expiresAt) {\n      const expiresAt = new Date(user.expiresAt);\n      const now = new Date();\n      const timeUntilExpiry = expiresAt.getTime() - now.getTime();\n\n      if (timeUntilExpiry > 0) {\n        const timeoutId = setTimeout(() => {\n          toast.error(\"Session expired. Please login again.\");\n          logout();\n        }, timeUntilExpiry);\n\n        return () => clearTimeout(timeoutId);\n      } else if (isAuthenticated) {\n        // Token already expired\n        logout();\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [user, isAuthenticated]);\n\n  const value: AuthContextType = {\n    user,\n    token,\n    isLoading,\n    isAuthenticated,\n    login,\n    logout,\n    register,\n    hasRole,\n    hasAnyRole,\n    refreshUser,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n}\n\n// Higher-order component for protected routes\nexport function withAuth<T extends Record<string, unknown>>(\n  Component: React.ComponentType<T>,\n  requiredRoles?: string[],\n) {\n  return function AuthenticatedComponent(props: T) {\n    const { isAuthenticated, isLoading, hasAnyRole } = useAuth();\n    const router = useRouter();\n\n    useEffect(() => {\n      if (!isLoading) {\n        if (!isAuthenticated) {\n          router.push(\"/login\");\n          return;\n        }\n\n        if (requiredRoles && !hasAnyRole(requiredRoles)) {\n          toast.error(\"You don't have permission to access this page\");\n          router.push(\"/dashboard\");\n          return;\n        }\n      }\n    }, [isAuthenticated, isLoading, hasAnyRole, router]);\n\n    if (isLoading) {\n      return (\n        <div className=\"flex min-h-screen items-center justify-center\">\n          <div className=\"loading-spinner h-8 w-8\"></div>\n        </div>\n      );\n    }\n\n    if (!isAuthenticated) {\n      return null;\n    }\n\n    if (requiredRoles && !hasAnyRole(requiredRoles)) {\n      return null;\n    }\n\n    return <Component {...props} />;\n  };\n}\n\n// Hook to check if user has specific permissions\nexport function usePermissions() {\n  const { hasRole, hasAnyRole, user } = useAuth();\n\n  const canAccessPatients = () =>\n    hasAnyRole([\"PATIENT\", \"DOCTOR\", \"NURSE\", \"ADMIN\", \"RECEPTIONIST\"]);\n  const canManagePatients = () =>\n    hasAnyRole([\"DOCTOR\", \"NURSE\", \"ADMIN\", \"RECEPTIONIST\"]);\n  const canAccessDoctors = () =>\n    hasAnyRole([\n      \"DOCTOR\",\n      \"ADMIN\",\n      \"DEPARTMENT_HEAD\",\n      \"PATIENT\",\n      \"RECEPTIONIST\",\n      \"NURSE\",\n    ]);\n  const canManageDoctors = () => hasAnyRole([\"ADMIN\", \"DEPARTMENT_HEAD\"]);\n  const canAccessAppointments = () =>\n    hasAnyRole([\"PATIENT\", \"DOCTOR\", \"NURSE\", \"ADMIN\", \"RECEPTIONIST\"]);\n  const canManageAppointments = () =>\n    hasAnyRole([\"DOCTOR\", \"ADMIN\", \"RECEPTIONIST\"]);\n  const canAccessBilling = () => hasAnyRole([\"BILLING_STAFF\", \"ADMIN\"]);\n  const canAccessPharmacy = () => hasAnyRole([\"PHARMACIST\", \"ADMIN\"]);\n  const canAccessLaboratory = () =>\n    hasAnyRole([\"LAB_TECHNICIAN\", \"DOCTOR\", \"ADMIN\"]);\n  const canAccessReports = () =>\n    hasAnyRole([\"ADMIN\", \"HOSPITAL_MANAGER\", \"DEPARTMENT_HEAD\"]);\n  const isAdmin = () => hasRole(\"ADMIN\");\n  const isDoctor = () => hasRole(\"DOCTOR\");\n  const isPatient = () => hasRole(\"PATIENT\");\n\n  return {\n    canAccessPatients,\n    canManagePatients,\n    canAccessDoctors,\n    canManageDoctors,\n    canAccessAppointments,\n    canManageAppointments,\n    canAccessBilling,\n    canAccessPharmacy,\n    canAccessLaboratory,\n    canAccessReports,\n    isAdmin,\n    isDoctor,\n    isPatient,\n    user,\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAqDA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAE/D,MAAM,eACJ,6DAAwC;AAEnC,SAAS,aAAa,EAAE,QAAQ,EAAiC;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,kBAAkB,CAAC,CAAC,QAAQ,CAAC,CAAC;IAEpC,qCAAqC;IACrC,IAAA,kNAAS,EAAC;QACR,MAAM,WAAW;YACf,IAAI;gBACF,MAAM,cAAc,gKAAO,CAAC,GAAG,CAAC;gBAChC,MAAM,aAAa,gKAAO,CAAC,GAAG,CAAC;gBAE/B,IAAI,eAAe,YAAY;oBAC7B,MAAM,aAAa,KAAK,KAAK,CAAC;oBAE9B,4BAA4B;oBAC5B,IACE,WAAW,SAAS,IACpB,IAAI,KAAK,WAAW,SAAS,IAAI,IAAI,QACrC;wBACA,SAAS;wBACT,QAAQ;oBACV,OAAO;wBACL,iCAAiC;wBACjC;oBACF;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C;YACF,SAAU;gBACR,aAAa;YACf;QACF;QAEA;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,QAAQ;QACR,SAAS;QACT,gKAAO,CAAC,MAAM,CAAC;QACf,gKAAO,CAAC,MAAM,CAAC;IACjB;IAEA,MAAM,eAAe,CAAC;QACpB,MAAM,WAAiB;YACrB,IAAI,aAAa,EAAE;YACnB,UAAU,aAAa,QAAQ;YAC/B,UAAU,aAAa,QAAQ;YAC/B,OAAO,aAAa,KAAK;YACzB,OAAO,aAAa,KAAK;YACzB,WAAW,aAAa,SAAS;QACnC;QAEA,SAAS,aAAa,KAAK;QAC3B,QAAQ;QAER,kCAAkC;QAClC,MAAM,YAAY,IAAI,KAAK,aAAa,SAAS;QACjD,gKAAO,CAAC,GAAG,CAAC,aAAa,aAAa,KAAK,EAAE;YAC3C,SAAS;YACT,QAAQ,oDAAyB;YACjC,UAAU;QACZ;QACA,gKAAO,CAAC,GAAG,CAAC,YAAY,KAAK,SAAS,CAAC,WAAW;YAChD,SAAS;YACT,QAAQ,oDAAyB;YACjC,UAAU;QACZ;IACF;IAEA,MAAM,QAAQ,OAAO;QACnB,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,eAAe,CAAC,EAAE;gBAC7D,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;gBACvD,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI;YACvC;YAEA,MAAM,eAA6B,MAAM,SAAS,IAAI;YACtD,aAAa;YAEb,kKAAK,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,aAAa,QAAQ,CAAC,CAAC,CAAC;YACvD,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,OAAO;YACd,MAAM,UAAU,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YACzD,kKAAK,CAAC,KAAK,CAAC;YACZ,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,WAAW,OAAO;QACtB,aAAa;QACb,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,kBAAkB,CAAC,EAAE;gBAChE,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;gBACvD,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI;YACvC;YAEA,MAAM,SAAS,IAAI;YAEnB,kKAAK,CAAC,OAAO,CACX,CAAC,4DAA4D,CAAC;YAGhE,2CAA2C;YAC3C,MAAM,MAAM;gBACV,UAAU,KAAK,QAAQ;gBACvB,UAAU,KAAK,QAAQ;YACzB;QACF,EAAE,OAAO,OAAO;YACd,MAAM,UACJ,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC3C,kKAAK,CAAC,KAAK,CAAC;YACZ,MAAM;QACR,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,SAAS;QACb;QACA,kKAAK,CAAC,OAAO,CAAC;QACd,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,cAAc;QAClB,IAAI,CAAC,OAAO;QAEZ,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,YAAY,CAAC,EAAE;gBAC1D,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,WAAiB,MAAM,SAAS,IAAI;YAC1C,QAAQ;YAER,gBAAgB;YAChB,MAAM,YAAY,IAAI,KAAK,SAAS,SAAS;YAC7C,gKAAO,CAAC,GAAG,CAAC,YAAY,KAAK,SAAS,CAAC,WAAW;gBAChD,SAAS;gBACT,QAAQ,oDAAyB;gBACjC,UAAU;YACZ;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,gCAAgC;YAChC;QACF;IACF;IAEA,MAAM,UAAU,CAAC;QACf,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,KAAK,KAAK,CAAC,QAAQ,CAAC,SAAS,KAAK,KAAK,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,MAAM;IACxE;IAEA,MAAM,aAAa,CAAC;QAClB,IAAI,CAAC,MAAM,OAAO;QAClB,OAAO,MAAM,IAAI,CAAC,CAAC,OAAS,QAAQ;IACtC;IAEA,iCAAiC;IACjC,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,WAAW;YACnB,MAAM,YAAY,IAAI,KAAK,KAAK,SAAS;YACzC,MAAM,MAAM,IAAI;YAChB,MAAM,kBAAkB,UAAU,OAAO,KAAK,IAAI,OAAO;YAEzD,IAAI,kBAAkB,GAAG;gBACvB,MAAM,YAAY,WAAW;oBAC3B,kKAAK,CAAC,KAAK,CAAC;oBACZ;gBACF,GAAG;gBAEH,OAAO,IAAM,aAAa;YAC5B,OAAO,IAAI,iBAAiB;gBAC1B,wBAAwB;gBACxB;YACF;QACF;IACA,uDAAuD;IACzD,GAAG;QAAC;QAAM;KAAgB;IAE1B,MAAM,QAAyB;QAC7B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,SAAS;IACd,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;AAGO,SAAS,SACd,SAAiC,EACjC,aAAwB;IAExB,OAAO,SAAS,uBAAuB,KAAQ;QAC7C,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG;QACnD,MAAM,SAAS,IAAA,+IAAS;QAExB,IAAA,kNAAS,EAAC;YACR,IAAI,CAAC,WAAW;gBACd,IAAI,CAAC,iBAAiB;oBACpB,OAAO,IAAI,CAAC;oBACZ;gBACF;gBAEA,IAAI,iBAAiB,CAAC,WAAW,gBAAgB;oBAC/C,kKAAK,CAAC,KAAK,CAAC;oBACZ,OAAO,IAAI,CAAC;oBACZ;gBACF;YACF;QACF,GAAG;YAAC;YAAiB;YAAW;YAAY;SAAO;QAEnD,IAAI,WAAW;YACb,qBACE,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;;QAGrB;QAEA,IAAI,CAAC,iBAAiB;YACpB,OAAO;QACT;QAEA,IAAI,iBAAiB,CAAC,WAAW,gBAAgB;YAC/C,OAAO;QACT;QAEA,qBAAO,8OAAC;YAAW,GAAG,KAAK;;;;;;IAC7B;AACF;AAGO,SAAS;IACd,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG;IAEtC,MAAM,oBAAoB,IACxB,WAAW;YAAC;YAAW;YAAU;YAAS;YAAS;SAAe;IACpE,MAAM,oBAAoB,IACxB,WAAW;YAAC;YAAU;YAAS;YAAS;SAAe;IACzD,MAAM,mBAAmB,IACvB,WAAW;YACT;YACA;YACA;YACA;YACA;YACA;SACD;IACH,MAAM,mBAAmB,IAAM,WAAW;YAAC;YAAS;SAAkB;IACtE,MAAM,wBAAwB,IAC5B,WAAW;YAAC;YAAW;YAAU;YAAS;YAAS;SAAe;IACpE,MAAM,wBAAwB,IAC5B,WAAW;YAAC;YAAU;YAAS;SAAe;IAChD,MAAM,mBAAmB,IAAM,WAAW;YAAC;YAAiB;SAAQ;IACpE,MAAM,oBAAoB,IAAM,WAAW;YAAC;YAAc;SAAQ;IAClE,MAAM,sBAAsB,IAC1B,WAAW;YAAC;YAAkB;YAAU;SAAQ;IAClD,MAAM,mBAAmB,IACvB,WAAW;YAAC;YAAS;YAAoB;SAAkB;IAC7D,MAAM,UAAU,IAAM,QAAQ;IAC9B,MAAM,WAAW,IAAM,QAAQ;IAC/B,MAAM,YAAY,IAAM,QAAQ;IAEhC,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///Users/puspo/JavaCourse/SpringBoot/hospitalManagementSystem/frontend/src/providers/ThemeProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useEffect, useState } from \"react\";\n\ntype Theme = \"light\" | \"dark\" | \"system\";\n\ninterface ThemeContextType {\n    theme: Theme;\n    actualTheme: \"light\" | \"dark\";\n    setTheme: (theme: Theme) => void;\n    toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n    const [theme, setThemeState] = useState<Theme>(\"system\");\n    const [actualTheme, setActualTheme] = useState<\"light\" | \"dark\">(\"light\");\n\n    // Initialize theme from localStorage\n    useEffect(() => {\n        const savedTheme = localStorage.getItem(\"theme\") as Theme;\n        if (savedTheme && [\"light\", \"dark\", \"system\"].includes(savedTheme)) {\n            setThemeState(savedTheme);\n        }\n    }, []);\n\n    // Update actual theme based on theme setting and system preference\n    useEffect(() => {\n        const updateActualTheme = () => {\n            if (theme === \"system\") {\n                const systemPrefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n                setActualTheme(systemPrefersDark ? \"dark\" : \"light\");\n            } else {\n                setActualTheme(theme);\n            }\n        };\n\n        updateActualTheme();\n\n        // Listen for system theme changes\n        const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n        const handleChange = () => {\n            if (theme === \"system\") {\n                updateActualTheme();\n            }\n        };\n\n        mediaQuery.addEventListener(\"change\", handleChange);\n        return () => mediaQuery.removeEventListener(\"change\", handleChange);\n    }, [theme]);\n\n    // Apply theme to document\n    useEffect(() => {\n        const root = document.documentElement;\n\n        // Remove all theme classes\n        root.classList.remove(\"light\", \"dark\");\n\n        // Add current theme class\n        root.classList.add(actualTheme);\n\n        // Update meta theme-color for mobile browsers\n        const metaThemeColor = document.querySelector('meta[name=\"theme-color\"]');\n        if (metaThemeColor) {\n            metaThemeColor.setAttribute(\n                \"content\",\n                actualTheme === \"dark\" ? \"#0a0a0a\" : \"#ffffff\"\n            );\n        } else {\n            // Create meta theme-color if it doesn't exist\n            const meta = document.createElement(\"meta\");\n            meta.name = \"theme-color\";\n            meta.content = actualTheme === \"dark\" ? \"#0a0a0a\" : \"#ffffff\";\n            document.head.appendChild(meta);\n        }\n    }, [actualTheme]);\n\n    const setTheme = (newTheme: Theme) => {\n        setThemeState(newTheme);\n        localStorage.setItem(\"theme\", newTheme);\n    };\n\n    const toggleTheme = () => {\n        const newTheme = actualTheme === \"light\" ? \"dark\" : \"light\";\n        setTheme(newTheme);\n    };\n\n    const value: ThemeContextType = {\n        theme,\n        actualTheme,\n        setTheme,\n        toggleTheme,\n    };\n\n    return (\n        <ThemeContext.Provider value={value}>\n            {children}\n        </ThemeContext.Provider>\n    );\n}\n\nexport function useTheme() {\n    const context = useContext(ThemeContext);\n    if (context === undefined) {\n        throw new Error(\"useTheme must be used within a ThemeProvider\");\n    }\n    return context;\n}\n\n// Theme toggle component\nexport function ThemeToggle() {\n    const { theme, actualTheme, setTheme } = useTheme();\n\n    const themes: { value: Theme; label: string; icon: string }[] = [\n        { value: \"light\", label: \"Light\", icon: \"‚òÄÔ∏è\" },\n        { value: \"dark\", label: \"Dark\", icon: \"üåô\" },\n        { value: \"system\", label: \"System\", icon: \"üíª\" },\n    ];\n\n    return (\n        <div className=\"relative\">\n            <select\n                value={theme}\n                onChange={(e) => setTheme(e.target.value as Theme)}\n                className=\"input h-9 w-32 cursor-pointer text-sm\"\n                aria-label=\"Select theme\"\n            >\n                {themes.map((themeOption) => (\n                    <option key={themeOption.value} value={themeOption.value}>\n                        {themeOption.icon} {themeOption.label}\n                    </option>\n                ))}\n            </select>\n        </div>\n    );\n}\n\n// Simple theme toggle button\nexport function ThemeToggleButton() {\n    const { actualTheme, toggleTheme } = useTheme();\n\n    return (\n        <button\n            onClick={toggleTheme}\n            className=\"btn-ghost btn-sm flex items-center gap-2\"\n            aria-label={`Switch to ${actualTheme === \"light\" ? \"dark\" : \"light\"} mode`}\n        >\n            <span className=\"text-lg\">\n                {actualTheme === \"light\" ? \"üåô\" : \"‚òÄÔ∏è\"}\n            </span>\n            <span className=\"hidden sm:inline\">\n                {actualTheme === \"light\" ? \"Dark\" : \"Light\"}\n            </span>\n        </button>\n    );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 578, "column": 0}, "map": {"version":3,"sources":["file:///Users/puspo/JavaCourse/SpringBoot/hospitalManagementSystem/frontend/src/app/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { ReactQueryDevtools } from \"@tanstack/react-query-devtools\";\nimport { Toaster } from \"react-hot-toast\";\nimport { AuthProvider } from \"@/providers/AuthProvider\";\nimport { ThemeProvider } from \"@/providers/ThemeProvider\";\nimport \"./globals.css\";\n\n// Create a client\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: 1,\n      refetchOnWindowFocus: false,\n      staleTime: 5 * 60 * 1000, // 5 minutes\n    },\n  },\n});\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  return (\n    <html lang=\"en\" suppressHydrationWarning>\n      <head>\n        <title>Hospital Management System</title>\n        <meta\n          name=\"description\"\n          content=\"Comprehensive hospital management system\"\n        />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n        <link rel=\"icon\" href=\"/favicon.ico\" />\n      </head>\n      <body\n        className=\"min-h-screen bg-neutral-50 dark:bg-neutral-900\"\n        suppressHydrationWarning\n      >\n        <QueryClientProvider client={queryClient}>\n          <ThemeProvider>\n            <AuthProvider>\n              {children}\n              <Toaster\n                position=\"top-right\"\n                toastOptions={{\n                  duration: 4000,\n                  style: {\n                    background: \"rgb(var(--card))\",\n                    color: \"rgb(var(--card-foreground))\",\n                    border: \"1px solid rgb(var(--border))\",\n                  },\n                  success: {\n                    style: {\n                      background: \"rgb(34 197 94)\",\n                      color: \"white\",\n                    },\n                  },\n                  error: {\n                    style: {\n                      background: \"rgb(239 68 68)\",\n                      color: \"white\",\n                    },\n                  },\n                }}\n              />\n            </AuthProvider>\n          </ThemeProvider>\n          <ReactQueryDevtools initialIsOpen={false} />\n        </QueryClientProvider>\n      </body>\n    </html>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AAUA,kBAAkB;AAClB,MAAM,cAAc,IAAI,4LAAW,CAAC;IAClC,gBAAgB;QACd,SAAS;YACP,OAAO;YACP,sBAAsB;YACtB,WAAW,IAAI,KAAK;QACtB;IACF;AACF;AAEe,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,qBACE,8OAAC;QAAK,MAAK;QAAK,wBAAwB;;0BACtC,8OAAC;;kCACC,8OAAC;kCAAM;;;;;;kCACP,8OAAC;wBACC,MAAK;wBACL,SAAQ;;;;;;kCAEV,8OAAC;wBAAK,MAAK;wBAAW,SAAQ;;;;;;kCAC9B,8OAAC;wBAAK,KAAI;wBAAO,MAAK;;;;;;;;;;;;0BAExB,8OAAC;gBACC,WAAU;gBACV,wBAAwB;0BAExB,cAAA,8OAAC,6MAAmB;oBAAC,QAAQ;;sCAC3B,8OAAC,mJAAa;sCACZ,cAAA,8OAAC,iJAAY;;oCACV;kDACD,8OAAC,kKAAO;wCACN,UAAS;wCACT,cAAc;4CACZ,UAAU;4CACV,OAAO;gDACL,YAAY;gDACZ,OAAO;gDACP,QAAQ;4CACV;4CACA,SAAS;gDACP,OAAO;oDACL,YAAY;oDACZ,OAAO;gDACT;4CACF;4CACA,OAAO;gDACL,OAAO;oDACL,YAAY;oDACZ,OAAO;gDACT;4CACF;wCACF;;;;;;;;;;;;;;;;;sCAIN,8OAAC,0MAAkB;4BAAC,eAAe;;;;;;;;;;;;;;;;;;;;;;;AAK7C","debugId":null}}]
}